# ğŸš€ æ— äººæœºè€ƒç‚¹è¿è¥ç®¡ç†ç³»ç»Ÿ

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org/)
[![Vue.js](https://img.shields.io/badge/vue-3.x-4FC08D.svg)](https://vuejs.org/)
[![MySQL](https://img.shields.io/badge/mysql-8.0-blue.svg)](https://www.mysql.com/)

ä¸€ä¸ªå®Œæ•´çš„æ— äººæœºé©¾é©¶å‘˜è€ƒè¯•ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«åç«¯APIã€å‰ç«¯ç®¡ç†ç•Œé¢å’Œå¾®ä¿¡å°ç¨‹åºã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **è€ƒç”Ÿç®¡ç†**: è€ƒç”Ÿä¿¡æ¯å½•å…¥ã€æŸ¥è¯¢ã€æ‰¹é‡å¯¼å…¥å¯¼å‡º
- **è€ƒè¯•æ’æœŸ**: æ™ºèƒ½æ’æœŸç³»ç»Ÿï¼Œæ”¯æŒæ‰¹é‡æ’æœŸå’Œæ—¥ç¨‹ç®¡ç†
- **è€ƒåœºç®¡ç†**: è€ƒåœºèµ„æºç®¡ç†ï¼Œå®æ—¶çŠ¶æ€ç›‘æ§
- **æˆç»©ç®¡ç†**: è€ƒè¯•æˆç»©å½•å…¥ã€ç»Ÿè®¡åˆ†æ
- **ç”¨æˆ·æƒé™**: å¤šè§’è‰²æƒé™æ§åˆ¶ï¼ˆç®¡ç†å‘˜ã€æœºæ„ç®¡ç†å‘˜ã€è€ƒåŠ¡å‘˜ï¼‰

### ğŸ“± å¤šç«¯æ”¯æŒ
- **Webç®¡ç†ç«¯**: Vue 3 + Element Plus ç°ä»£åŒ–ç®¡ç†ç•Œé¢
- **å¾®ä¿¡å°ç¨‹åº**: è€ƒç”Ÿç«¯ç§»åŠ¨åº”ç”¨
- **RESTful API**: å®Œæ•´çš„åç«¯æ¥å£æœåŠ¡

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- JWT Token è®¤è¯æˆæƒ
- å¯†ç åŠ å¯†å­˜å‚¨ (bcrypt)
- API è¯·æ±‚é¢‘ç‡é™åˆ¶
- XSS/CSRF é˜²æŠ¤
- æ•°æ®éªŒè¯ä¸è¿‡æ»¤

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Node.js + Express.js
- **æ•°æ®åº“**: MySQL 8.0 / SQLite (å¼€å‘ç¯å¢ƒ)
- **ORM**: Sequelize
- **è®¤è¯**: JWT + bcrypt
- **ç¼“å­˜**: Redis (å¯é€‰)
- **æ–‡ä»¶ä¸Šä¼ **: Multer

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3 + Composition API
- **UIç»„ä»¶**: Element Plus
- **æ„å»ºå·¥å…·**: Vite
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±ç®¡ç†**: Vue Router 4

### å¾®ä¿¡å°ç¨‹åº
- **æ¡†æ¶**: å¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘
- **UIç»„ä»¶**: è‡ªå®šä¹‰ç»„ä»¶åº“
- **API**: ç»Ÿä¸€æ¥å£è°ƒç”¨

### éƒ¨ç½²æŠ€æœ¯
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åå‘ä»£ç†**: Nginx
- **è¿›ç¨‹ç®¡ç†**: PM2 (å¯é€‰)
- **ç›‘æ§**: å¥åº·æ£€æŸ¥ + æ—¥å¿—ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18.0.0+
- MySQL 8.0+ (ç”Ÿäº§ç¯å¢ƒ)
- Docker & Docker Compose (æ¨è)
- Git

### ğŸ³ Docker éƒ¨ç½² (æ¨è)

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd exam-management-system-vcc
```

#### 2. ä¸€é”®éƒ¨ç½²
```bash
chmod +x scripts/deploy.sh
./scripts/deploy.sh production
```

#### 3. è®¿é—®åº”ç”¨
- **Webç®¡ç†ç«¯**: http://localhost
- **APIæ–‡æ¡£**: http://localhost/health
- **é»˜è®¤ç®¡ç†å‘˜**:
  - ç”¨æˆ·å: `admin`
  - å¯†ç : `admin123456`

### ğŸ“¦ æ‰‹åŠ¨éƒ¨ç½²

#### 1. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒæ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

#### 2. å®‰è£…ä¾èµ–
```bash
# åç«¯ä¾èµ–
cd backend
npm install

# å‰ç«¯ä¾èµ–
cd ../frontend
npm install
```

#### 3. æ•°æ®åº“åˆå§‹åŒ–
```bash
cd backend
npm run db:init
```

#### 4. å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨åç«¯ (ç«¯å£ 3000)
cd backend
npm run start

# å¯åŠ¨å‰ç«¯ (ç«¯å£ 5173)
cd frontend
npm run dev
```

## ğŸ§ª **ç³»ç»ŸéªŒè¯æŠ¥å‘Š**

### âœ… **è´¨é‡æ£€æŸ¥å®ŒæˆçŠ¶æ€**

**Stage 1: é¡¹ç›®ç»“æ„å®Œæ•´æ€§** âœ…
- å®Œæ•´çš„ä¸‰å±‚æ¶æ„ï¼šåç«¯APIã€å‰ç«¯Webã€å¾®ä¿¡å°ç¨‹åº
- æ ‡å‡†åŒ–ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡
- é…ç½®æ–‡ä»¶å®Œæ•´ä¸”æ ¼å¼æ­£ç¡®

**Stage 2: ä¾èµ–ç®¡ç†** âœ…
- åç«¯ä¾èµ–å·²ä¿®å¤å¹¶å®‰è£…å®Œæˆ
- å‰ç«¯ä¾èµ–å·²å®‰è£…å®Œæˆ(324ä¸ªåŒ…)
- æ‰€æœ‰package.jsonæ–‡ä»¶é…ç½®æ­£ç¡®

**Stage 3: åŠŸèƒ½æµ‹è¯•** âœ…
- æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼Œåˆå§‹åŒ–æˆåŠŸ
- APIè®¤è¯ç³»ç»Ÿå®Œå…¨æ­£å¸¸ (JWT + bcrypt)
- ç”¨æˆ·ç™»å½•API: `POST /api/auth/login` âœ…
- è€ƒç”Ÿç™»å½•API: `POST /api/auth/candidate-login` âœ…
- ç”¨æˆ·ä¿¡æ¯API: `GET /api/auth/me` âœ…
- è€ƒç”Ÿç®¡ç†API: `GET /api/candidates` âœ…

**Stage 4: ç”Ÿäº§éƒ¨ç½²** âœ…
- Dockerå¤šé˜¶æ®µæ„å»ºé…ç½®å®Œæˆ
- Docker Composeç¼–æ’æ–‡ä»¶å®Œæˆ
- Nginxåå‘ä»£ç†é…ç½®å®Œæˆ
- è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬å®Œæˆ
- ç”Ÿäº§ç¯å¢ƒé…ç½®å®Œæˆ

**Stage 5: æ–‡æ¡£äº¤ä»˜** âœ…
- å®Œæ•´çš„README.mdè¯´æ˜æ–‡æ¡£
- APIæ¥å£æ–‡æ¡£
- éƒ¨ç½²æŒ‡å—
- æ•…éšœæ’é™¤æŒ‡å—

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
exam-management-system/
â”œâ”€â”€ backend/           # Node.js + Express åç«¯API
â”œâ”€â”€ frontend/          # Vue3 + Element Plus ç®¡ç†åå°
â”œâ”€â”€ miniapp/          # å¾®ä¿¡å°ç¨‹åº
â””â”€â”€ deploy/           # Dockeréƒ¨ç½²é…ç½®
```

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **ç”¨æˆ·ç®¡ç†**: æ”¯æŒç®¡ç†å‘˜ã€æœºæ„ç®¡ç†å‘˜ã€è€ƒåŠ¡å‘˜å¤šè§’è‰²ä½“ç³»
- **è€ƒç”Ÿç®¡ç†**: è€ƒç”Ÿä¿¡æ¯ç»´æŠ¤ã€æ‰¹é‡å¯¼å…¥ã€çŠ¶æ€ç®¡ç†
- **æ’æœŸç®¡ç†**: æ™ºèƒ½æ’æœŸã€æ‰¹é‡åˆ›å»ºã€æ—¶é—´å†²çªæ£€æµ‹
- **è€ƒè¯•æµç¨‹**: ç­¾åˆ°ã€å¼€å§‹è€ƒè¯•ã€å®Œæˆè€ƒè¯•å®Œæ•´æµç¨‹
- **æ•°æ®ç»Ÿè®¡**: å®æ—¶æ•°æ®åˆ†æå’Œå¯è§†åŒ–æŠ¥è¡¨

### ğŸ“± å°ç¨‹åºåŠŸèƒ½
- **è€ƒç”Ÿç«¯**: èº«ä»½è¯ç™»å½•ã€ä¸ªäººä¿¡æ¯ã€åŠ¨æ€äºŒç»´ç ã€è€ƒè¯•æ—¥ç¨‹
- **è€ƒåŠ¡ç«¯**: æ‰«ç ç­¾åˆ°ã€è€ƒåœºçœ‹æ¿ã€å®æ—¶æ•°æ®
- **å…¬å…±çœ‹æ¿**: å®æ—¶è€ƒè¯•çŠ¶æ€å±•ç¤º

### ğŸ” å®‰å…¨ç‰¹æ€§
- JWTè®¤è¯ + bcryptå¯†ç åŠ å¯†
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶(RBAC)
- æœºæ„æ•°æ®éš”ç¦»
- äºŒç»´ç ç­¾åéªŒè¯
- XSSã€CSRFé˜²æŠ¤

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- MySQL 8.0+ / SQLite (å¼€å‘ç¯å¢ƒ)
- Docker & Docker Compose (æ¨è)
- Redis (å¯é€‰)

### å¼€å‘ç¯å¢ƒå¯åŠ¨

#### 1. åç«¯æœåŠ¡
```bash
cd backend
npm install
npm run dev
```

#### 2. å‰ç«¯æœåŠ¡
```bash
cd frontend
npm install
npm run dev
```

#### 3. æ•°æ®åº“åˆå§‹åŒ–
```bash
cd backend
node src/scripts/initDatabase.js
```

### Dockeréƒ¨ç½²

#### ä¸€é”®éƒ¨ç½²
```bash
cd deploy
./deploy.sh dev up    # å¼€å‘ç¯å¢ƒ
./deploy.sh prod up   # ç”Ÿäº§ç¯å¢ƒ
```

#### æ‰‹åŠ¨éƒ¨ç½²
```bash
cd deploy
docker-compose up -d
```

## APIæ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `PUT /api/auth/change-password` - ä¿®æ”¹å¯†ç 

### è€ƒç”Ÿç®¡ç†
- `GET /api/candidates` - è·å–è€ƒç”Ÿåˆ—è¡¨
- `POST /api/candidates` - åˆ›å»ºè€ƒç”Ÿ
- `PUT /api/candidates/:id` - æ›´æ–°è€ƒç”Ÿä¿¡æ¯
- `DELETE /api/candidates/:id` - åˆ é™¤è€ƒç”Ÿ
- `POST /api/candidates/import` - æ‰¹é‡å¯¼å…¥

### æ’æœŸç®¡ç†
- `GET /api/schedules` - è·å–æ’æœŸåˆ—è¡¨
- `POST /api/schedules` - åˆ›å»ºæ’æœŸ
- `POST /api/schedules/batch` - æ‰¹é‡åˆ›å»ºæ’æœŸ
- `POST /api/schedules/:id/checkin` - è€ƒç”Ÿç­¾åˆ°
- `POST /api/schedules/:id/start` - å¼€å§‹è€ƒè¯•
- `POST /api/schedules/:id/complete` - å®Œæˆè€ƒè¯•

### å°ç¨‹åºæ¥å£
- `POST /api/miniapp/candidate/login` - è€ƒç”Ÿç™»å½•
- `GET /api/miniapp/candidate/qrcode` - ç”Ÿæˆç­¾åˆ°ç 
- `GET /api/miniapp/public/board` - å…¬å…±çœ‹æ¿
- `POST /api/miniapp/staff/scan-checkin` - æ‰«ç ç­¾åˆ°

## éƒ¨ç½²é…ç½®

### ç¯å¢ƒå˜é‡
```bash
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=exam_system
DB_USER=exam_user
DB_PASSWORD=exam_password_123

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=7d

# Redisé…ç½® (å¯é€‰)
REDIS_HOST=localhost
REDIS_PORT=6379
```

### ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
- ä½¿ç”¨MySQLæ›¿ä»£SQLite
- å¯ç”¨Redisç¼“å­˜
- é…ç½®HTTPSè¯ä¹¦
- å¯ç”¨Nginx gzipå‹ç¼©
- é…ç½®ç›‘æ§å’Œæ—¥å¿—

## æµ‹è¯•

### åç«¯æµ‹è¯•
```bash
cd backend
npm test
```

### APIæ¥å£æµ‹è¯•
```bash
cd deploy
./test-apis.sh http://localhost/api
```

### å‹åŠ›æµ‹è¯•
```bash
# ä½¿ç”¨Apache Bench
ab -n 1000 -c 10 http://localhost/api/health

# ä½¿ç”¨wrk
wrk -t12 -c400 -d30s http://localhost/api/health
```

## ç›‘æ§

### å¥åº·æ£€æŸ¥
- åç«¯: `GET /health`
- å‰ç«¯: `GET /`
- æ•°æ®åº“è¿æ¥çŠ¶æ€
- Redisè¿æ¥çŠ¶æ€

### æ€§èƒ½ç›‘æ§
- Prometheus + Grafana (å¯é€‰)
- åº”ç”¨æ€§èƒ½æŒ‡æ ‡
- ç³»ç»Ÿèµ„æºç›‘æ§
- é”™è¯¯ç‡å’Œå“åº”æ—¶é—´

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **æ¡†æ¶**: Node.js + Express.js
- **æ•°æ®åº“**: MySQL + Sequelize ORM
- **è®¤è¯**: JWT + bcrypt
- **æ–‡ä»¶å¤„ç†**: multer + xlsx
- **éªŒè¯**: express-validator
- **æ—¥å¿—**: winston

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Vue 3 + Composition API
- **UIåº“**: Element Plus
- **æ„å»ºå·¥å…·**: Vite
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **HTTPå®¢æˆ·ç«¯**: Axios

### å°ç¨‹åºæŠ€æœ¯
- **å¹³å°**: å¾®ä¿¡åŸç”Ÿå°ç¨‹åº
- **UI**: åŸç”Ÿç»„ä»¶ + è‡ªå®šä¹‰æ ·å¼
- **çŠ¶æ€ç®¡ç†**: å…¨å±€æ•°æ®ç®¡ç†
- **ç½‘ç»œè¯·æ±‚**: wx.requestå°è£…

### éƒ¨ç½²æŠ€æœ¯
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åå‘ä»£ç†**: Nginx
- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis
- **ç›‘æ§**: Prometheus + Grafana

## ç›®å½•ç»“æ„

```
exam-management-system/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/           # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ scripts/         # å·¥å…·è„šæœ¬
â”‚   â”‚   â””â”€â”€ app.js           # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                  # å‰ç«¯ç®¡ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/      # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/          # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ api/            # APIæ¥å£
â”‚   â”‚   â””â”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ miniapp/                   # å¾®ä¿¡å°ç¨‹åº
â”‚   â”œâ”€â”€ pages/               # é¡µé¢
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ app.js              # å°ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ app.json            # å°ç¨‹åºé…ç½®
â”‚   â””â”€â”€ app.wxss            # å…¨å±€æ ·å¼
â””â”€â”€ deploy/                    # éƒ¨ç½²é…ç½®
    â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’
    â”œâ”€â”€ nginx/               # Nginxé…ç½®
    â”œâ”€â”€ deploy.sh           # éƒ¨ç½²è„šæœ¬
    â””â”€â”€ test-apis.sh        # æ¥å£æµ‹è¯•è„šæœ¬
```

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ESLint + Prettieræ ¼å¼åŒ–
- éµå¾ªRESTful APIè®¾è®¡åŸåˆ™
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼
- å®Œå–„çš„æ³¨é‡Šå’Œæ–‡æ¡£

### æ•°æ®åº“è®¾è®¡
- ä½¿ç”¨Sequelizeè¿›è¡Œæ•°æ®å»ºæ¨¡
- æ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹
- è‡ªåŠ¨æ—¶é—´æˆ³å’Œè½¯åˆ é™¤
- å®Œæ•´çš„å…³è”å…³ç³»

### å®‰å…¨æœ€ä½³å®è·µ
- è¾“å…¥éªŒè¯å’ŒSQLæ³¨å…¥é˜²æŠ¤
- XSSå’ŒCSRFæ”»å‡»é˜²æŠ¤
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- å®‰å…¨çš„ä¼šè¯ç®¡ç†

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ç”¨æˆ·è§’è‰²ï¼Ÿ
A: åœ¨æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ä¸­æ·»åŠ æ–°è§’è‰²ï¼Œå¹¶åœ¨æƒé™ä¸­é—´ä»¶ä¸­é…ç½®ç›¸åº”æƒé™ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰è€ƒè¯•æµç¨‹ï¼Ÿ
A: ä¿®æ”¹Scheduleæ¨¡å‹çš„çŠ¶æ€æœºå’Œç›¸å…³æ§åˆ¶å™¨æ–¹æ³•ã€‚

### Q: å¦‚ä½•éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Ÿ
A: ä½¿ç”¨Dockeréƒ¨ç½²è„šæœ¬ï¼Œé…ç½®åŸŸåå’ŒSSLè¯ä¹¦ã€‚

### Q: å¦‚ä½•æ‰©å±•å°ç¨‹åºåŠŸèƒ½ï¼Ÿ
A: åœ¨miniappç›®å½•ä¸‹æ·»åŠ æ–°é¡µé¢å’ŒAPIè°ƒç”¨ã€‚

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issues
- é‚®ç®±: your-email@example.com

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-XX)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´çš„è€ƒè¯•ç®¡ç†åŠŸèƒ½
- ğŸ“± å¾®ä¿¡å°ç¨‹åºæ”¯æŒ
- ğŸ³ Dockeréƒ¨ç½²æ”¯æŒ
- ğŸ“Š æ•°æ®ç»Ÿè®¡å’Œç›‘æ§