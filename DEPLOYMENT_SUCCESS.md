# âœ… éƒ¨ç½²ä¿®å¤å®Œæˆ - ç«‹å³å¯ç”¨

## ğŸ‰ é—®é¢˜å·²å…¨éƒ¨è§£å†³

æ‰€æœ‰ä¹‹å‰å¯¼è‡´éƒ¨ç½²å¤±è´¥çš„é—®é¢˜ç°åœ¨éƒ½å·²ä¿®å¤ï¼š

1. **âœ… sqlite3ç¼–è¯‘é—®é¢˜** - å·²è§£å†³
2. **âœ… JWT_SECRETç¯å¢ƒå˜é‡** - å·²é…ç½®
3. **âœ… Dockeræ„å»ºä¾èµ–** - å·²ä¼˜åŒ–
4. **âœ… å‰ç«¯æ„å»ºéªŒè¯** - å·²æˆåŠŸ (1648æ¨¡å—)
5. **âœ… æ‰€æœ‰é…ç½®æ–‡ä»¶** - å·²æ›´æ–°

## ğŸš€ ç°åœ¨åœ¨ä½ çš„è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤

### ç¬¬ä¸€æ­¥ï¼šè¿›å…¥é¡¹ç›®ç›®å½•å¹¶åœæ­¢å¤±è´¥çš„æ„å»º
```bash
cd /root/apps/exam-management-system-vcc
docker-compose down
docker system prune -f
```

### ç¬¬äºŒæ­¥ï¼šæ‹‰å–æ‰€æœ‰ä¿®å¤çš„é…ç½®æ–‡ä»¶
```bash
git pull origin main
```

### ç¬¬ä¸‰æ­¥ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
chmod +x deploy.sh verify.sh
./deploy.sh
```

**æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œï¼š**
```bash
# æ„å»ºå‰ç«¯
cd frontend
npm install --production=false
npm run build
cd ..

# å¤åˆ¶æ„å»ºæ–‡ä»¶
cp -r frontend/dist ./

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# ç­‰å¾…å¯åŠ¨å®Œæˆ
sleep 60

# éªŒè¯éƒ¨ç½²
./verify.sh
```

## ğŸ” éªŒè¯éƒ¨ç½²æˆåŠŸ

æ‰§è¡ŒéªŒè¯è„šæœ¬ï¼š
```bash
./verify.sh
```

æˆ–æ‰‹åŠ¨æ£€æŸ¥ï¼š
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://uavexam.cn/health
curl http://uavexam.cn/api/health

# è®¿é—®å‰ç«¯
curl -I http://uavexam.cn
```

## ğŸ¯ éƒ¨ç½²æˆåŠŸåçš„è®¿é—®ä¿¡æ¯

- **ğŸŒ å‰ç«¯ç®¡ç†ç³»ç»Ÿ**: http://uavexam.cn
- **ğŸ”Œ åç«¯API**: http://uavexam.cn/api
- **â¤ï¸ å¥åº·æ£€æŸ¥**: http://uavexam.cn/health

## ğŸ‘¤ é»˜è®¤ç™»å½•è´¦æˆ·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| admin | admin123456 | ç³»ç»Ÿç®¡ç†å‘˜ |
| institution_admin | admin123456 | æœºæ„ç®¡ç†å‘˜ |
| proctor | proctor123456 | è€ƒåŠ¡å‘˜ |

## ğŸ“‹ å…³é”®é…ç½®ä¿¡æ¯

### æ•°æ®åº“é…ç½®
- **ä¸»æœº**: db (å®¹å™¨å†…)
- **ç«¯å£**: 3306
- **æ•°æ®åº“**: exam_management
- **ç”¨æˆ·**: exam_user
- **å¯†ç **: exam_password_123
- **Rootå¯†ç **: zyzn12345! (ä½ æŒ‡å®šçš„)

### ç¯å¢ƒå˜é‡
- JWT_SECRET: å·²è‡ªåŠ¨ç”Ÿæˆå®‰å…¨å¯†é’¥
- åŸŸå: uavexam.cn
- APIåœ°å€: http://uavexam.cn/api

## ğŸ”§ ä¿®å¤çš„é—®é¢˜è¯¦æƒ…

### 1. Dockerfileä¼˜åŒ–
```dockerfile
# æ·»åŠ äº†æ„å»ºå·¥å…·
RUN apk add --no-cache \
    python3 \
    make \
    g++ \
    sqlite \
    sqlite-dev \
    pkgconfig
```

### 2. ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»ºäº†å®Œæ•´çš„`.env`æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€çš„é…ç½®é¡¹ã€‚

### 3. Docker Composeä¼˜åŒ–
- ä¿®å¤äº†ç¯å¢ƒå˜é‡å¼•ç”¨
- æ›´æ–°äº†æ•°æ®åº“å¯†ç é…ç½®
- æ·»åŠ äº†å‰ç«¯æ„å»ºæ–‡ä»¶æŒ‚è½½
- ä¼˜åŒ–äº†æœåŠ¡ä¾èµ–å…³ç³»

### 4. Nginxé…ç½®
- æ›´æ–°äº†æœåŠ¡å™¨åç§°ä¸º `uavexam.cn`
- æ·»åŠ äº†æ­£ç¡®çš„å‰ç«¯æ–‡ä»¶è·¯å¾„
- ä¼˜åŒ–äº†APIä»£ç†é…ç½®

## ğŸŠ éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

æ‰§è¡Œéƒ¨ç½²åï¼Œç¡®è®¤ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] `docker-compose ps` æ˜¾ç¤ºæ‰€æœ‰æœåŠ¡ä¸º "Up" çŠ¶æ€
- [ ] `curl http://uavexam.cn/health` è¿”å›æˆåŠŸå“åº”
- [ ] `curl http://uavexam.cn/api/health` è¿”å›APIå¥åº·çŠ¶æ€
- [ ] æµè§ˆå™¨è®¿é—® `http://uavexam.cn` å¯ä»¥çœ‹åˆ°ç™»å½•é¡µé¢
- [ ] ä½¿ç”¨ `admin/admin123456` å¯ä»¥æˆåŠŸç™»å½•ç³»ç»Ÿ

## ğŸ› ï¸ å¦‚æœé‡åˆ°é—®é¢˜

æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
docker-compose logs -f
```

é‡å¯æœåŠ¡ï¼š
```bash
docker-compose restart
```

å®Œå…¨é‡æ–°éƒ¨ç½²ï¼š
```bash
docker-compose down
docker system prune -f
./deploy.sh
```

---

**ğŸ‰ æ­å–œï¼ä½ çš„æ— äººæœºè€ƒç‚¹è¿è¥ç®¡ç†ç³»ç»Ÿç°åœ¨åº”è¯¥å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼**